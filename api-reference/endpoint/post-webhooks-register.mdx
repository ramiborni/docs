---
title: "Register Webhook"
openapi: "POST /webhooks/register"
description: "Register a webhook URL to receive event notifications from SendPilot"
---

Register a webhook URL to receive real-time event notifications from SendPilot. Requires X-API-KEY authentication.

## Request Body

<ParamField body="url" type="string" required>
  Webhook URL to receive events. Must be a valid HTTPS endpoint.
  
  Example: `https://your-app.com/webhooks/sendpilot`
</ParamField>

<ParamField body="events" type="array<string>" required>
  List of event types to subscribe to. Accepts both formats: UPPERCASE_UNDERSCORE (MESSAGE_RECEIVED) or lowercase.dot (message.received). Use `*` for all events.
  
  Available events:
  - `MESSAGE_RECEIVED` or `message.received` - Inbound LinkedIn messages
  - `MESSAGE_SENT` or `message.sent` - Outbound message confirmations
  - `CONNECTION_ACCEPTED` or `connection.accepted` - Connection requests accepted
  - `CONNECTION_REJECTED` or `connection.rejected` - Connection requests rejected
  - `ACCOUNT_CONNECTED` or `account.connected` - Account connected to SendPilot
  - `ACCOUNT_DISCONNECTED` or `account.disconnected` - Account disconnected
  - `ACCOUNT_DELETED` or `account.deleted` - Account permanently deleted
  - `*` - Subscribe to all events
  
  Example: `["MESSAGE_RECEIVED", "CONNECTION_ACCEPTED", "ACCOUNT_DISCONNECTED"]`
</ParamField>

## Response

<ResponseField name="status" type="string">
  Status of webhook registration. Returns `registered` on success.
</ResponseField>

<ResponseField name="url" type="string">
  Registered webhook URL that will receive events.
</ResponseField>

## Example Request

```bash
curl -X POST https://integration-api-gateway.agreeablesea-e4815929.swedencentral.azurecontainerapps.io/api/linkedin/webhooks/register \
  -H "X-API-KEY: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://your-app.com/webhooks/sendpilot",
    "events": ["MESSAGE_RECEIVED", "CONNECTION_ACCEPTED", "ACCOUNT_DISCONNECTED"]
  }'
```

## Example Response

```json
{
  "status": "registered",
  "url": "https://your-app.com/webhooks/sendpilot"
}
```

## Event Types

### Messaging Events

| Event | Description | Documentation |
|-------|-------------|---------------|
| `MESSAGE_RECEIVED` | Inbound LinkedIn message received | [Message Received](/api-reference/endpoint/post-webhooks-message-received) |
| `MESSAGE_SENT` | Outbound message successfully delivered | [Message Sent](/api-reference/endpoint/post-webhooks-message-sent) |

### Connection Events

| Event | Description | Documentation |
|-------|-------------|---------------|
| `CONNECTION_ACCEPTED` | Connection request accepted | [Connection Accepted](/api-reference/endpoint/post-webhooks-linkedin-account-accepted) |
| `CONNECTION_REJECTED` | Connection request rejected | [Connection Rejected](/api-reference/endpoint/post-webhooks-connection-rejected) |

### Account Events

| Event | Description | Documentation |
|-------|-------------|---------------|
| `ACCOUNT_CONNECTED` | Account connected to SendPilot | [Account Connected](/api-reference/endpoint/post-webhooks-account-connected) |
| `ACCOUNT_DISCONNECTED` | Account disconnected | [Account Disconnected](/api-reference/endpoint/post-webhooks-linkedin-account-status) |
| `ACCOUNT_DELETED` | Account permanently deleted | [Account Deleted](/api-reference/endpoint/post-webhooks-account-deleted) |


## Best Practices

<Tip>
Subscribe only to events you need. Using `*` for all events may result in unnecessary webhook traffic.
</Tip>

- **Use HTTPS**: Webhook endpoints must use TLS/SSL encryption
- **Implement idempotency**: Use the `eventId` field to prevent duplicate processing
- **Respond quickly**: Return `200 OK` within 5 seconds to acknowledge receipt
- **Process asynchronously**: Queue webhook events for background processing
- **Handle retries**: SendPilot will retry failed deliveries with exponential backoff

## Webhook Requirements

Your webhook endpoint must:

1. Accept POST requests with JSON payloads
2. Return `200 OK` status within 5 seconds
3. Use HTTPS (TLS/SSL)
4. Respond with `{ "received": true }` to acknowledge receipt

## Common Errors

| Status | Error | Description |
|--------|-------|-------------|
| 200 | Success | Webhook registered successfully |
| 400 | `Invalid request data` | URL is invalid or events array is empty |
| 401 | `Invalid or missing authentication` | Authentication headers are missing or invalid |

## Multiple Webhooks

You can register multiple webhook URLs for different purposes:

```javascript
// Register webhook for production
await registerWebhook({
  url: 'https://your-app.com/webhooks/production',
  events: ['MESSAGE_RECEIVED']
});

// Register webhook for analytics
await registerWebhook({
  url: 'https://analytics.your-app.com/webhooks',
  events: ['*']
});
```

## See Also

- [Unregister Webhook](/api-reference/endpoint/delete-webhooks-unregister) - Remove a webhook URL
- [List Webhooks](/api-reference/endpoint/get-webhooks-list) - View registered webhooks
- [Message Received Webhook](/api-reference/endpoint/post-webhooks-message-received) - Webhook payload reference

